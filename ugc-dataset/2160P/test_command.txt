~Play video: 
ffplay -f rawvideo -pixel_format yuv420p10le -video_size 3840x2160 -vf "format=yuv420p10le" HDR.yuv

ffplay -f rawvideo -pixel_format yuv420p -video_size 3840x2160 -vf "format=yuv420p" Gaming.yuv

ffplay -f rawvideo -pixel_format yuv420p -video_size 1920x1080 -vf "format=yuv420p" Gaming_decoded.yuv


~Mkv to yuv: 
ffmpeg -y -i HDR_2160P-06ae.mkv -c:v rawvideo -pixel_format yuv420p10le HDR.yuv
ffmpeg -y -i Gaming_2160P-2dc4.mkv -c:v rawvideo -pixel_format yuv420p Gaming.yuv


~Downsample to 1080p: 
ffmpeg -s:v 3840x2160 -r 24 -pix_fmt yuv420p10le -i HDR.yuv -vf scale=1920:1080:flags=lanczos -s:v 1920x1080 -r 24 -pix_fmt yuv420p10le HDR_downsample_1080p.yuv

ffmpeg -s:v 3840x2160 -r 59.94006309 -pix_fmt yuv420p -i Gaming.yuv -vf scale=1920:1080:flags=lanczos -s:v 1920x1080 -r 59.94006309 -pix_fmt yuv420p Gaming_downsample_1080p.yuv

ffmpeg -s:v 3840x2160 -r 59.94006309 -pix_fmt yuv420p -i Gaming_duplicate.yuv -vf scale=1920:1080:flags=lanczos -s:v 1920x1080 -r 59.94006309 -pix_fmt yuv420p Gaming_duplicate_downsample_1080p.yuv


~Downsample to 720p: 
ffmpeg -s:v 3840x2160 -r 24 -pix_fmt yuv420p10le -i HDR.yuv -vf scale=1280:720:flags=lanczos -s:v 1280x720 -r 24 -pix_fmt yuv420p10le HDR_downsample_720p.yuv

ffmpeg -s:v 3840x2160 -r 59.94006309 -pix_fmt yuv420p -i Gaming.yuv -vf scale=1280:720:flags=lanczos -s:v 1280x720 -r 59.94006309 -pix_fmt yuv420p Gaming_downsample_720p.yuv


～Encode: 
ffmpeg -s 3840x2160 -r 24 -pix_fmt yuv420p10le -y -i HDR.yuv -c:v libx264 -crf 50 HDR_encoded.mp4

ffmpeg -s 3840x2160 -r 59.94006309 -pix_fmt yuv420p -y -i Gaming.yuv -c:v libx264 -crf 10 Gaming_encoded.mp4

ffmpeg -s 1920x1080 -r 59.94006309 -pix_fmt yuv420p -y -i Gaming_downsample_1080p.yuv -c:v libx264 -crf 10 Gaming_downsample_1080p_encoded.mp4

ffmpeg -s 1280x720 -r 59.94006309 -pix_fmt yuv420p -y -i Gaming_downsample_720p.yuv -c:v libx264 -crf 50 Gaming_downsample_720p_encoded.mp4


～Decode: 
ffmpeg -i HDR_encoded.mp4 -y HDR_decoded.yuv

ffmpeg -i Gaming_encoded_qp50.mp4 -y Gaming_decoded_qp50.yuv

ffmpeg -i Gaming_downsample_1080p_encoded.mp4 -y Gaming_decoded.yuv

ffmpeg -i Gaming_downsample_720p_encoded.mp4 -y Gaming_decoded.yuv

～Upsample to 2160p: 
ffmpeg -s:v 1920x1080 -r 24 -pix_fmt yuv420p10le -i HDR_decoded.yuv -vf scale=3840:2160:flags=lanczos -s:v 3840x2160 -r 24 -pix_fmt yuv420p10le HDR_1080p_upsample.yuv

ffmpeg -s:v 1920x1080 -r 59.94006309 -pix_fmt yuv420p -i Gaming_decoded.yuv -vf scale=3840:2160:flags=lanczos -s:v 3840x2160 -r 59.94006309 -pix_fmt yuv420p Gaming_1080p_upsample.yuv


ffmpeg -s:v 1280x720 -r 24 -pix_fmt yuv420p10le -i HDR_decoded.yuv -vf scale=3840:2160:flags=lanczos -s:v 3840x2160 -r 24 -pix_fmt yuv420p10le HDR_720p_upsample.yuv

ffmpeg -s:v 1280x720 -r 59.94006309 -pix_fmt yuv420p -i Gaming_decoded.yuv -vf scale=3840:2160:flags=lanczos -s:v 3840x2160 -r 59.94006309 -pix_fmt yuv420p Gaming_720p_upsample.yuv



~PSNR:
ffmpeg -video_size 3840x2160 -r 59.94006309 -pix_fmt yuv420p -i Gaming.yuv -video_size 3840x2160 -r 59.94006309 -pix_fmt yuv420p -i Gaming_decoded.yuv -lavfi psnr=stats_file=psnr_Gaming.csv -f null - > psnr_Gaming.txt 2>&1



~VMAF:
ffmpeg -video_size 3840x2160 -r 59.94006309 -pix_fmt yuv420p -i Gaming.yuv \
    -video_size 3840x2160 -r 59.94006309 -pix_fmt yuv420p -i Gaming_decoded_qp10_tr.yuv \
    -lavfi "[0:v]setpts=PTS-STARTPTS[reference]; \
            [1:v]setpts=PTS-STARTPTS[distorted]; \
            [distorted][reference]libvmaf=log_fmt=xml:log_path=vmaf_Gaming_qp10.csv:model_path=../../model/vmaf_4k_v0.6.1.json:n_threads=4" \
    -f null - > vmaf_Gaming_qp10.txt 2>&1

ffmpeg -video_size 3840x2160 -r 59.94006309 -pix_fmt yuv420p -i Gaming.yuv \
    -video_size 3840x2160 -r 59.94006309 -pix_fmt yuv420p -i Gaming_1080p_upsample.yuv \
    -lavfi "[0:v]setpts=PTS-STARTPTS[reference]; \
            [1:v]setpts=PTS-STARTPTS[distorted]; \
            [distorted][reference]libvmaf=log_fmt=xml:log_path=vmaf_Gaming.csv:model_path=../../model/vmaf_4k_v0.6.1.json:n_threads=4" \
    -f null - > vmaf_Gaming.txt 2>&1


～Duplicate: 
ffmpeg -stream_loop 2 -y -i HDR_2160P-06ae.mkv -c copy HDR_duplicate.mkv

ffmpeg -stream_loop 4 -y -i Gaming_2160P-2dc4.mkv -c copy Gaming_duplicate.mkv

ffmpeg -f rawvideo -pix_fmt yuv420p10le -s 3840x2160 -r 24 -i HDR.yuv -filter_complex "[0:v][0:v][0:v]concat=n=3:v=1[v]" -map "[v]" HDR_duplicate.yuv

ffmpeg -f rawvideo -pix_fmt yuv420p -s 1920x1080 -r 59.94006309 -i Gaming_downsample_1080p.yuv -filter_complex "[0:v][0:v][0:v]concat=n=3:v=1[v]" -map "[v]" Gaming_downsample_1080p_duplicate.yuv


~FFprobe:
ffprobe -pixel_format yuv420p -video_size 3840x2160 Gaming_duplicate.yuv

ffmpeg -f rawvideo -s 3840x2160 -pix_fmt yuv420p -i Gaming_duplicate.yuv -c:v libx264 -preset slow -crf 18 Gaming_duplicate.mkv

ffmpeg -f rawvideo -pix_fmt yuv420p -s 1920x1080 -r 59.94006309 -i Gaming_downsample_1080p.yuv -filter_complex "[0:v][0:v][0:v][0:v]concat=n=4:v=1[v]" -map "[v]" Gaming_1080p_duplicate.yuv

Trim the video:
ffmpeg -s 3840x2160 -i Gaming_decoded_qp50.yuv -vf select="between(n\,1\,1200),setpts=PTS-STARTPTS" Gaming_decoded_qp50_tr.yuv


QP 10 PSNR:
PSNR_Y: 50.836043921157156 dB
PSNR_U: 56.00464670371319 dB
PSNR_V: 55.99899297514093 dB
Average PSNR: 52.12748790072463 dB

QP 50 PSNR:
PSNR_Y: 31.955442714218087 dB
PSNR_U: 38.49806095323599 dB
PSNR_V: 38.50670583648294 dB
Average PSNR: 33.59217788437843 dB


